#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET -1
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

const int buttonPin = 0;
bool startLyrics = false;
//ini buat lirik nya 
String lyrics[] = {
  "Suara lembutmu", "Mengisyratkan cinta", "Tatap matamu",
  "Buatku Menggila", "Kecup manismu", "Wanna be all over you",
  "Terus mendekat", "Biar ku dekap,ah", "Tick-tock",
  "Hatiku kau ziplock", "Makin lama it's stuck", "Ku percaya ini with my luck",
  "it's just me and you againts the world", "forever im yours and you'll be mine", "But, do you feel it too Like the way i do",
  "Aku calon mantu terbaik mamamu", "Walaupun hatimu", "Sekeras batu",
  "still got you on mind", "No matter what you do", "But, do you feel it too Like the way i do?",
  "Aku calon mantu terbaik mamamu", "Walaupun hatimu", "Sekeras batu",
  "still got you on mind", "No matter what you do", "But, do you feel it too Like the way i do?",
};

// Buat atur waktu teks nya berapa lama muncul nya
int durations[] = {
  2500, 1750, 1900,
  2000, 1700, 2000,
  1950, 2100, 1000,
  1500, 1500, 1700,
  2500, 1750, 4700,
  4500, 2000, 1900,
  2600, 700, 4100,
  4400, 2000, 1900,
  2300, 700, 5000
};

int lyricCount = sizeof(lyrics) / sizeof(lyrics[0]);
int currentIndex = 0;
unsigned long previousMillis = 0;

void setup() {
  pinMode(buttonPin, INPUT_PULLUP);
  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);
  display.clearDisplay();
  display.setTextSize(1);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(20, 25);
  display.println("Dayennz");
  display.display();
}

void loop() {
  if (!startLyrics) {
    if (digitalRead(buttonPin) == LOW) {
      startLyrics = true;
      display.clearDisplay();
      delay(500);
    } else {
      return;
    }
  }

  unsigned long currentMillis = millis();
  if (currentMillis - previousMillis >= durations[currentIndex]) {
    previousMillis = currentMillis;

    String kata = lyrics[currentIndex];

    display.clearDisplay();
    int16_t x1, y1;
    uint16_t w, h;
    display.setTextSize(1);
    display.getTextBounds(kata, 0, 0, &x1, &y1, &w, &h);
    int16_t x = (SCREEN_WIDTH - w) / 2;
    int16_t y = (SCREEN_HEIGHT - h) / 2;

    display.setCursor(x, y);
    display.println(kata);
    display.display();

    currentIndex++;
    if (currentIndex >= lyricCount) {
      currentIndex = 0;
    }
  }
}
